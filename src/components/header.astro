---
import Button from '@/components/button.astro';
import Logo from '@/images/logo-navbar.png';
import LogoText from '@/images/logo-text-black.png';
import type { GlobalStoryblok } from '@/types/storyblok';
import { Image } from 'astro:assets';

interface AstroProps {
  navbar: GlobalStoryblok['navbar'];
}
---

<>
  <div class="bg-gray-950 py-2">
    <div class="container text-center">
      <a href="/contact" class="text-sm text-white transition hover:underline hover:opacity-80">
        Profitez de 20% de réduction sur tous nos développements grâce à notre agrément Crédit Impôt
        Innovation !
      </a>
    </div>
  </div>
  <header class="sticky top-0 z-50 flex h-[60px] items-center border-b border-gray-100 bg-gray-50">
    <div class="container flex items-center justify-between">
      <div class="flex items-center justify-between">
        <a class="group flex items-center gap-2" href="/">
          <Image
            priority={true}
            loading="eager"
            src={Logo}
            alt="Logo de Hexium"
            sizes="10vw"
            class="h-8 w-auto object-contain transition group-hover:opacity-90"
          />
          <Image
            priority={true}
            loading="eager"
            src={LogoText}
            alt="Logo de Hexium"
            sizes="10vw"
            class="h-3 w-auto object-contain opacity-80"
          />
        </a>
        <nav class="ml-3">
          <a href="/" class="px-3 py-1.5 text-sm font-medium">Agence</a>
          <a href="/" class="px-3 py-1.5 text-sm font-medium">Services</a>
          <a href="/" class="px-3 py-1.5 text-sm font-medium">Technologies</a>
          <a href="/" class="px-3 py-1.5 text-sm font-medium">Réalisations</a>
          <a href="/" class="px-3 py-1.5 text-sm font-medium">Blog</a>
        </nav>
      </div>
      <div class="flex items-center gap-2">
        <button
          data-cal-link="anthony-hexium/etude-de-projet"
          data-cal-namespace="etude-de-projet"
          data-cal-config='{"layout":"month_view"}'
          class="group before:transtion-opacity relative isolate inline-flex cursor-pointer items-center justify-center rounded-md bg-gray-900 px-3 py-1 text-left text-sm font-medium text-white shadow-[0_1px_theme(colors.white/0.07)_inset,0_1px_3px_theme(colors.gray.900/0.2)] ring-1 ring-gray-900 transition duration-300 ease-[cubic-bezier(0.4,0.36,0,1)] before:pointer-events-none before:absolute before:inset-0 before:-z-10 before:rounded-md before:bg-gradient-to-b before:from-white/20 before:opacity-50 before:duration-300 before:ease-[cubic-bezier(0.4,0.36,0,1)] after:pointer-events-none after:absolute after:inset-0 after:-z-10 after:rounded-md after:bg-gradient-to-b after:from-white/10 after:from-[46%] after:to-[54%] after:mix-blend-overlay hover:before:opacity-100"
        >
          Prendre rendez-vous
        </button>
        <Button color="blueFull" isLink link="/contact" isArrowShowed={false}>Contact</Button>
      </div>
    </div>
  </header>
</>

<script type="text/javascript">
  (function (C, A, L) {
    let p = function (a, ar) {
      a.q.push(ar);
    };
    let d = C.document;
    C.Cal =
      C.Cal ||
      function () {
        let cal = C.Cal;
        let ar = arguments;
        if (!cal.loaded) {
          cal.ns = {};
          cal.q = cal.q || [];
          d.head.appendChild(d.createElement('script')).src = A;
          cal.loaded = true;
        }
        if (ar[0] === L) {
          const api = function () {
            p(api, arguments);
          };
          const namespace = ar[1];
          api.q = api.q || [];
          if (typeof namespace === 'string') {
            cal.ns[namespace] = cal.ns[namespace] || api;
            p(cal.ns[namespace], ar);
            p(cal, ['initNamespace', namespace]);
          } else p(cal, ar);
          return;
        }
        p(cal, ar);
      };
  })(window, 'https://app.cal.com/embed/embed.js', 'init');
  Cal('init', 'etude-de-projet', { origin: 'https://cal.com' });

  Cal.ns['etude-de-projet']('ui', { hideEventTypeDetails: true, layout: 'month_view' });
</script>
