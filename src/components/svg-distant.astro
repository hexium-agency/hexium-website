---
import type { AssetStoryblok } from '@/types/storyblok';

interface AstroProps {
  url: AssetStoryblok;
  class?: string;
}

const { class: className, url } = Astro.props as AstroProps;

let svgContent = await fetch(url.filename).then((res) => res.text());
svgContent = svgContent.replace(/stroke="[^"]*"/g, 'stroke="currentColor"');

svgContent = svgContent.replace('<svg', `<svg class="${className || ''}" aria-hidden="true"`);
svgContent = svgContent.replace(/<desc>.*?<\/desc>/g, '');
svgContent = svgContent.replace(/\sheight="[^"]*"/g, '');
svgContent = svgContent.replace(/\sid="[^"]*"/g, '');
svgContent = svgContent.replace(/\swidth="[^"]*"/g, '');
svgContent = svgContent.replace(/\sxmlns="[^"]*"/g, '');
svgContent = svgContent.replace(/stroke-width="[^"]*"/g, 'stroke-width="1.5"');
---

<Fragment set:html={svgContent} />
