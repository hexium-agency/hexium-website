---
import hexRgb from 'hex-rgb';

const colorSquare = hexRgb('#F7DF1D', { format: 'array' });
const colorLetters = hexRgb('#000', { format: 'array' });
---

<div
  class="absolute top-10 left-20 size-[350px] rotate-[10deg] sm:top-9 sm:-right-16 sm:left-auto lg:top-1/2 lg:-right-[100px] lg:-translate-y-1/2 lg:transform xl:right-[100px]"
>
  <div
    class="absolute inset-0"
    style="mask: url(data:image/svg+xml,%3Csvg%20width%3D%221000%22%20height%3D%221000%22%20viewBox%3D%220%200%201000%201000%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20clip-path%3D%22url(%23clip0_364_1035)%22%3E%3Cpath%20d%3D%22M0%200H1000V1000H0V0Z%22%20fill%3D%22%23F7DF1E%22%2F%3E%3C%2Fg%3E%3Cdefs%3E%3CclipPath%20id%3D%22clip0_364_1035%22%3E%3Crect%20width%3D%221000%22%20height%3D%221000%22%20fill%3D%22white%22%2F%3E%3C%2FclipPath%3E%3C%2Fdefs%3E%3C%2Fsvg%3E) 0 0 / 100% 100%"
  >
    <div id="javascript-dots-container" class="absolute inset-0" data-color={colorSquare}></div>
  </div>
  <div
    class="absolute inset-0"
    style="mask: url(data:image/svg+xml,%3Csvg%20width%3D%221000%22%20height%3D%221000%22%20viewBox%3D%220%200%201000%201000%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M262.937%20835.668L339.461%20789.355C354.227%20815.531%20367.656%20837.68%20399.871%20837.68C430.75%20837.68%20450.223%20825.602%20450.223%20778.617V459.094H544.195V779.945C544.195%20877.277%20487.141%20921.582%20403.898%20921.582C328.723%20921.582%20285.086%20882.648%20262.934%20835.66M595.238%20825.598L671.754%20781.297C691.898%20814.191%20718.078%20838.355%20764.391%20838.355C803.332%20838.355%20828.16%20818.887%20828.16%20792.035C828.16%20759.816%20802.652%20748.402%20759.691%20729.613L736.203%20719.535C668.402%20690.68%20623.43%20654.43%20623.43%20577.906C623.43%20507.422%20677.129%20453.719%20761.039%20453.719C820.781%20453.719%20863.742%20474.531%20894.617%20528.902L821.445%20575.895C805.332%20547.031%20787.887%20535.621%20761.035%20535.621C733.512%20535.621%20716.059%20553.074%20716.059%20575.895C716.059%20604.086%20733.512%20615.504%20773.785%20632.957L797.277%20643.023C877.16%20677.262%20922.133%20712.164%20922.133%20790.695C922.133%20875.281%20855.68%20921.594%20766.402%20921.594C679.141%20921.594%20622.754%20879.977%20595.234%20825.602%22%20fill%3D%22black%22%2F%3E%3C%2Fsvg%3E) 0 0 / 100% 100%"
  >
    <div id="javascript-letters-dots-container" class="absolute inset-0" data-color={colorLetters}>
    </div>
  </div>
</div>

<script>
  import { DotsBlock } from '@/lib/dots/dots-block';
  document.addEventListener('astro:page-load', () => {
    const squareColor = document
      .querySelector('#javascript-dots-container')
      ?.getAttribute('data-color');
    const squareColorRgb = squareColor?.split(',').map(Number);
    new DotsBlock(document.querySelector('#javascript-dots-container') as HTMLElement, [
      squareColorRgb!,
    ]);

    const lettersColor = document
      .querySelector('#javascript-letters-dots-container')
      ?.getAttribute('data-color');
    const lettersColorRgb = lettersColor?.split(',').map(Number);
    new DotsBlock(document.querySelector('#javascript-letters-dots-container') as HTMLElement, [
      lettersColorRgb!,
    ]);
  });
</script>
